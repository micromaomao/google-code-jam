<!DOCTYPE html><html><head><meta charset="utf8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="../commons/style.css"><script src="../commons/general.js" async></script><title>2018-1A Problem C - Mao's Google Code Jam practice files</title><link rel="stylesheet" href="../commons/hljs.css"></head><body><a class="toroot" href="..">Return to problem list</a><h1>2018-1A Problem C</h1><h2>Final solution</h2><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/cmd.go" target="_blank">cmd.go</a>:</div><a class="download" href="files/cmd.go" title="Download original" download="cmd.go">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2018-1A/3/cmd.go" target="_blank">open on GitHub</a></div><pre><code class="hljs"><span class="hljs-comment">// package, import, etc...</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">start</span><span class="hljs-params">()</span></span> {
  <span class="hljs-comment">// read T, repeat test() T times...</span>
}

<span class="hljs-keyword">type</span> Cookie <span class="hljs-keyword">struct</span> {
	w              <span class="hljs-keyword">int</span>
	h              <span class="hljs-keyword">int</span>
	pAdditionalMin <span class="hljs-keyword">float64</span>
	pAdditionalMax <span class="hljs-keyword">float64</span>
}

<span class="hljs-keyword">const</span> eplison <span class="hljs-keyword">float64</span> = <span class="hljs-number">0.000001</span>

<span class="hljs-keyword">type</span> Interval <span class="hljs-keyword">struct</span> {
	min <span class="hljs-keyword">float64</span>
	max <span class="hljs-keyword">float64</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span> {
	<span class="hljs-keyword">var</span> N, P <span class="hljs-keyword">int</span>
	mustReadLineOfInts(&amp;N, &amp;P)
	cookies := <span class="hljs-built_in">make</span>([]Cookie, <span class="hljs-number">0</span>, N)
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; N; i++ {
		<span class="hljs-keyword">var</span> w, h <span class="hljs-keyword">int</span>
		mustReadLineOfInts(&amp;w, &amp;h)
		cookies = <span class="hljs-built_in">append</span>(cookies, Cookie{
			w: w, h: h,
		})
	}
	<span class="hljs-keyword">var</span> baseP <span class="hljs-keyword">float64</span>
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(cookies); i++ {
		cookie := &amp;cookies[i]
		<span class="hljs-keyword">if</span> cookie.w &lt; cookie.h {
			cookie.w, cookie.h = cookie.h, cookie.w
		}
		cookieP := <span class="hljs-number">2</span> * (cookie.w + cookie.h)
		cookie.pAdditionalMin = <span class="hljs-keyword">float64</span>(<span class="hljs-number">2</span>*(cookie.w+<span class="hljs-number">2</span>*cookie.h) - cookieP)
		cookie.pAdditionalMax = <span class="hljs-number">2</span>*(<span class="hljs-keyword">float64</span>(cookie.w+cookie.h)+<span class="hljs-keyword">float64</span>(math.Sqrt(<span class="hljs-keyword">float64</span>(cookie.w*cookie.w+cookie.h*cookie.h)))) - <span class="hljs-keyword">float64</span>(cookieP)
		baseP += <span class="hljs-keyword">float64</span>(cookieP)
	}
	addIntervals := <span class="hljs-built_in">make</span>(IntervalArray, <span class="hljs-number">0</span>)
	addIntervals = <span class="hljs-built_in">append</span>(addIntervals, Interval{<span class="hljs-number">0</span>, <span class="hljs-number">0</span>}) <span class="hljs-comment">// In the loop below, each cookie would have a chance for its addMin, addMax to be added to this 0, 0 interval, representing the case where only that cookie is cutted.</span>
	maxMin := <span class="hljs-keyword">float64</span>(P) - baseP
	<span class="hljs-keyword">if</span> maxMin &lt; eplison {
		fmt.Fprintf(stdout, <span class="hljs-string">"%.15f\n"</span>, <span class="hljs-keyword">float64</span>(P))
		<span class="hljs-keyword">return</span>
	}
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(cookies); i++ {
		cookie := &amp;cookies[i]
		<span class="hljs-comment">// Either don't cut this cookie, in which case intervals are untouched, or...</span>
		<span class="hljs-keyword">for</span> _, interval := <span class="hljs-keyword">range</span> addIntervals {
			addIntervals = <span class="hljs-built_in">append</span>(addIntervals, Interval{interval.min + cookie.pAdditionalMin, interval.max + cookie.pAdditionalMax})
		}
		mergeIntervals(&amp;addIntervals, maxMin)
	}
	lastInterval := addIntervals[<span class="hljs-built_in">len</span>(addIntervals)<span class="hljs-number">-1</span>]
	maxP := lastInterval.max + baseP
	<span class="hljs-keyword">if</span> maxP &gt; <span class="hljs-keyword">float64</span>(P) {
		fmt.Fprintf(stdout, <span class="hljs-string">"%.15f\n"</span>, <span class="hljs-keyword">float64</span>(P))
	} <span class="hljs-keyword">else</span> {
		fmt.Fprintf(stdout, <span class="hljs-string">"%.15f\n"</span>, maxP)
	}
}

<span class="hljs-keyword">type</span> IntervalArray []Interval

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(its IntervalArray)</span> <span class="hljs-title">Len</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> {
	<span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(its)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(its IntervalArray)</span> <span class="hljs-title">Less</span><span class="hljs-params">(i <span class="hljs-keyword">int</span>, j <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">bool</span></span> {
	<span class="hljs-keyword">return</span> its[i].min &lt; its[j].min
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(its IntervalArray)</span> <span class="hljs-title">Swap</span><span class="hljs-params">(i <span class="hljs-keyword">int</span>, j <span class="hljs-keyword">int</span>)</span></span> {
	its[i], its[j] = its[j], its[i]
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mergeIntervals</span><span class="hljs-params">(its *IntervalArray, maxMin <span class="hljs-keyword">float64</span>)</span></span> {
	<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(*its) == <span class="hljs-number">0</span> {
		<span class="hljs-keyword">return</span>
	}
	sort.Sort(*its)
	<span class="hljs-keyword">if</span> (*its)[<span class="hljs-number">0</span>].min &gt; maxMin {
		*its = <span class="hljs-built_in">make</span>(IntervalArray, <span class="hljs-number">0</span>)
		<span class="hljs-keyword">return</span>
	}
	newArr := <span class="hljs-built_in">make</span>(IntervalArray, <span class="hljs-number">0</span>)
	currentStarting := (*its)[<span class="hljs-number">0</span>]
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(*its); i++ {
		it := (*its)[i]
		<span class="hljs-keyword">if</span> it.min-eplison &gt; currentStarting.max {
			<span class="hljs-keyword">if</span> it.min &gt; maxMin {
				<span class="hljs-keyword">break</span>
			}
			newArr = <span class="hljs-built_in">append</span>(newArr, currentStarting)
			currentStarting = it
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> it.max &gt; currentStarting.max {
			currentStarting.max = it.max
		}
	}
	newArr = <span class="hljs-built_in">append</span>(newArr, currentStarting)
	*its = newArr
}

<span class="hljs-comment">// boilerplate omitted...</span></code></pre><h2>Sample test cases given in question</h2><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/sample.in" target="_blank">sample.in</a>:</div><a class="download" href="files/sample.in" title="Download original" download="sample.in">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2018-1A/3/sample.in" target="_blank">open on GitHub</a></div><pre><code class="hljs">4
1 7
1 1
2 920
50 120
50 120
1 32
7 4
3 240
10 20
20 30
30 10
</code></pre><h2>Other files</h2><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/problem.in" target="_blank">problem.in</a>:</div><a class="download" href="files/problem.in" title="Download original" download="problem.in">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2018-1A/3/problem.in" target="_blank">open on GitHub</a></div><pre><code class="hljs">1
4 3551
229 225
240 187
27 67
212 184
</code></pre><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/problem.out" target="_blank">problem.out</a>:</div><a class="download" href="files/problem.out" title="Download original" download="problem.out">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2018-1A/3/problem.out" target="_blank">open on GitHub</a></div><pre><code class="hljs">Case #1: 3551.000000000000000
</code></pre><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/sketch.in" target="_blank">sketch.in</a>:</div><a class="download" href="files/sketch.in" title="Download original" download="sketch.in">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2018-1A/3/sketch.in" target="_blank">open on GitHub</a></div><pre><code class="hljs">16
3 240
20 10
30 20
30 10
3 250
20 10
30 20
30 10
3 260
20 10
30 20
30 10
3 270
20 10
30 20
30 10
3 280
20 10
30 20
30 10
3 290
20 10
30 20
30 10
3 300
20 10
30 20
30 10
3 240
20 10
20 10
20 10
3 250
20 10
20 10
20 10
3 260
20 10
20 10
20 10
3 270
20 10
20 10
20 10
3 280
20 10
20 10
20 10
3 300
20 10
20 10
20 10
3 400
20 10
20 10
20 10
3 430
20 10
30 20
30 10
4 1000
20 10
30 20
30 10
100 50
</code></pre><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/sketch.out" target="_blank">sketch.out</a>:</div><a class="download" href="files/sketch.out" title="Download original" download="sketch.out">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2018-1A/3/sketch.out" target="_blank">open on GitHub</a></div><pre><code class="hljs">Case #1: 240.000000000000000
Case #2: 240.000000000000000
Case #3: 260.000000000000000
Case #4: 270.000000000000000
Case #5: 280.000000000000000
Case #6: 290.000000000000000
Case #7: 300.000000000000000
Case #8: 240.000000000000000
Case #9: 250.000000000000000
Case #10: 260.000000000000000
Case #11: 270.000000000000000
Case #12: 280.000000000000000
Case #13: 300.000000000000000
Case #14: 314.164078649987403
Case #15: 420.077938262643158
Case #16: 943.684736012622125
</code></pre><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/test-generator/cmd.go" target="_blank">test-generator/cmd.go</a>:</div><a class="download" href="files/test-generator/cmd.go" title="Download original" download="cmd.go">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2018-1A/3/test-generator/cmd.go" target="_blank">open on GitHub</a></div><pre><code class="hljs"><span class="hljs-comment">// package, import, etc...</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	fin, err := os.OpenFile(<span class="hljs-string">"generated.in"</span>, os.O_WRONLY|os.O_CREATE, <span class="hljs-number">0666</span>)
	finHelp, err := os.OpenFile(<span class="hljs-string">"generated.in.wcomment"</span>, os.O_WRONLY|os.O_CREATE, <span class="hljs-number">0666</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)
	}
	in := bufio.NewWriter(fin)
	inHelp := bufio.NewWriter(finHelp)
	t := <span class="hljs-number">10000</span>
	fmt.Fprintf(in, <span class="hljs-string">"%d\n"</span>, t)
	fmt.Fprintf(inHelp, <span class="hljs-string">"%d\n"</span>, t)
	<span class="hljs-keyword">type</span> Cookie <span class="hljs-keyword">struct</span> {
		w <span class="hljs-keyword">int</span>
		h <span class="hljs-keyword">int</span>
	}
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; t; i++ {
		<span class="hljs-keyword">var</span> P <span class="hljs-keyword">int</span> = <span class="hljs-number">0</span>
		<span class="hljs-keyword">var</span> maxP <span class="hljs-keyword">float64</span> = <span class="hljs-number">0</span>
		N := rand.Intn(<span class="hljs-number">10</span>) + <span class="hljs-number">1</span>
		cookies := <span class="hljs-built_in">make</span>([]Cookie, <span class="hljs-number">0</span>, N)
		<span class="hljs-keyword">for</span> c := <span class="hljs-number">0</span>; c &lt; N; c++ {
			cookie := Cookie{
				w: rand.Intn(<span class="hljs-number">249</span>) + <span class="hljs-number">1</span>,
				h: rand.Intn(<span class="hljs-number">249</span>) + <span class="hljs-number">1</span>,
			}
			cookies = <span class="hljs-built_in">append</span>(cookies, cookie)
			P += <span class="hljs-number">2</span> * (cookie.w + cookie.h)
			maxP += <span class="hljs-number">2</span> * (<span class="hljs-keyword">float64</span>(cookie.w) + <span class="hljs-keyword">float64</span>(cookie.h) + math.Sqrt(<span class="hljs-keyword">float64</span>(cookie.w*cookie.w)+<span class="hljs-keyword">float64</span>(cookie.h*cookie.h)))
		}
		<span class="hljs-keyword">if</span> rand.Intn(<span class="hljs-number">2</span>) == <span class="hljs-number">1</span> {
			P += rand.Intn(<span class="hljs-keyword">int</span>(maxP-<span class="hljs-keyword">float64</span>(P)) * <span class="hljs-number">2</span>)
		}
		fmt.Fprintf(in, <span class="hljs-string">"%d %d\n"</span>, N, P)
		fmt.Fprintf(inHelp, <span class="hljs-string">"%d %d // Start case %d\n"</span>, N, P, i+<span class="hljs-number">1</span>)
		<span class="hljs-keyword">for</span> _, cookie := <span class="hljs-keyword">range</span> cookies {
			fmt.Fprintf(in, <span class="hljs-string">"%d %d\n"</span>, cookie.w, cookie.h)
			fmt.Fprintf(inHelp, <span class="hljs-string">"%d %d\n"</span>, cookie.w, cookie.h)
		}
	}
	in.Flush()
	inHelp.Flush()
}
</code></pre></body></html>