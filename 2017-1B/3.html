<!DOCTYPE html><html><head><meta charset="utf8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="../commons/style.css"><script src="../commons/general.js" async></script><title>2017-1B Problem C - Mao's Google Code Jam practice files</title><link rel="stylesheet" href="../commons/hljs.css"></head><body><a class="toroot" href="..">Return to problem list</a><h1>2017-1B Problem C</h1><h2>Solution that only works for the small input</h2><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/small/cmd.go" target="_blank">small/cmd.go</a>:</div><a class="download" href="files/small/cmd.go" title="Download original" download="cmd.go">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2017-1B/3/small/cmd.go" target="_blank">open on GitHub</a></div><pre><code class="hljs"><span class="hljs-comment">// Only works for small!</span>
<span class="hljs-comment">// package, import, etc...</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">start</span><span class="hljs-params">()</span></span> {
  <span class="hljs-comment">// read T, repeat test() T times...</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span> {
	<span class="hljs-keyword">var</span> N, Q <span class="hljs-keyword">int</span>
	mustReadLineOfInts(&amp;N, &amp;Q)
	assert(Q == <span class="hljs-number">1</span>)
	maxDist := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">0</span>, N)
	speed := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">0</span>, N)
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; N; i++ {
		<span class="hljs-keyword">var</span> E, S <span class="hljs-keyword">int</span>
		mustReadLineOfInts(&amp;E, &amp;S)
		maxDist = <span class="hljs-built_in">append</span>(maxDist, E)
		speed = <span class="hljs-built_in">append</span>(speed, S)
	}
	lengths := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">0</span>, N<span class="hljs-number">-1</span>)
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; N; i++ {
		destsDist := mustReadLineOfIntsIntoArray()
		assert(<span class="hljs-built_in">len</span>(destsDist) == N)
		<span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; N; j++ {
			<span class="hljs-keyword">if</span> j == i+<span class="hljs-number">1</span> {
				lengths = <span class="hljs-built_in">append</span>(lengths, destsDist[j])
			} <span class="hljs-keyword">else</span> {
				assert(destsDist[j] == <span class="hljs-number">-1</span>)
			}
		}
	}
	assert(<span class="hljs-built_in">len</span>(lengths) == N<span class="hljs-number">-1</span>)
	<span class="hljs-keyword">var</span> start, dest <span class="hljs-keyword">int</span>
	mustReadLineOfInts(&amp;start, &amp;dest)
	assert(start == <span class="hljs-number">1</span>)
	assert(dest == N)
	minTimes := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">float64</span>, N)
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; N; i++ {
		minTimes[i] = <span class="hljs-number">-1</span>
	}
	minTimes[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>
	<span class="hljs-keyword">for</span> reach := <span class="hljs-number">0</span>; reach &lt; N; reach++ {
		<span class="hljs-keyword">for</span> withHorseFrom := <span class="hljs-number">0</span>; withHorseFrom &lt;= reach; withHorseFrom++ {
			<span class="hljs-keyword">if</span> reach == withHorseFrom {
			} <span class="hljs-keyword">else</span> {
				requiredDist := <span class="hljs-number">0</span>
				<span class="hljs-keyword">for</span> i := withHorseFrom; i &lt; reach; i++ {
					requiredDist += lengths[i]
				}
				<span class="hljs-keyword">if</span> maxDist[withHorseFrom] &lt; requiredDist {
					<span class="hljs-keyword">continue</span>
				}
				time := minTimes[withHorseFrom] + <span class="hljs-keyword">float64</span>(requiredDist)/<span class="hljs-keyword">float64</span>(speed[withHorseFrom])
				<span class="hljs-keyword">if</span> time &lt; minTimes[reach] || minTimes[reach] == <span class="hljs-number">-1</span> {
					minTimes[reach] = time
				}
			}
		}
	}
	fmt.Fprintf(stdout, <span class="hljs-string">"%.12f\n"</span>, minTimes[N<span class="hljs-number">-1</span>])
}

<span class="hljs-comment">// boilerplate omitted...</span></code></pre><h2>Sample test cases given in question</h2><div class="filehead"><div class="fnamecontain"><a class="fname" href="files/sample.in" target="_blank">sample.in</a>:</div><a class="download" href="files/sample.in" title="Download original" download="sample.in">save</a>&nbsp;&nbsp;&nbsp;<a class="openongithub" href="https://github.com/micromaomao/google-code-jam/blob/master/2017-1B/3/sample.in" target="_blank">open on GitHub</a></div><pre><code class="hljs">3
3 1
2 3
2 4
4 4
-1 1 -1
-1 -1 1
-1 -1 -1
1 3
4 1
13 10
1 1000
10 8
5 5
-1 1 -1 -1
-1 -1 1 -1
-1 -1 -1 10
-1 -1 -1 -1
1 4
4 3
30 60
10 1000
12 5
20 1
-1 10 -1 31
10 -1 10 -1
-1 -1 -1 10
15 6 -1 -1
2 4
3 1
3 2
</code></pre></body></html>